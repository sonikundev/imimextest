import { defineEventHandler } from "h3";
import { useRuntimeConfig } from "#imports";
import pagePaths from "#nuxt-link-checker-sitemap/pages.mjs";
export default defineEventHandler(async () => {
  const runtimeConfig = useRuntimeConfig().public["nuxt-link-checker"];
  const linkDb = [
    ...pagePaths
  ];
  if (runtimeConfig.hasSitemapModule) {
    const sitemapDebug = await $fetch("/__sitemap__/debug.json");
    const entries = sitemapDebug.globalSources.map((source) => source.urls).flat();
    linkDb.push(...entries.map((s) => s.loc));
  }
  return [.../* @__PURE__ */ new Set([...linkDb])];
});
